<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>CoachUiManager.kt</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">app</a> &gt; <a href="index.source.html" class="el_package">com.fitquest.app.ui.fragments.coach</a> &gt; <span class="el_source">CoachUiManager.kt</span></div><h1>CoachUiManager.kt</h1><pre class="source lang-java linenums">package com.fitquest.app.ui.fragments.coach

import android.content.Context
import android.graphics.Color
import android.view.View
import android.widget.TextView
import androidx.core.content.ContextCompat
import com.fitquest.app.R
import com.fitquest.app.databinding.FragmentAiCoachBinding
import com.fitquest.app.util.ActivityUtils
import com.fitquest.app.util.TargetType
import com.google.android.material.button.MaterialButton
import java.util.Locale

<span class="fc" id="L15">class CoachUiManager(</span>
<span class="fc" id="L16">    private val context: Context,</span>
<span class="fc" id="L17">    private val binding: FragmentAiCoachBinding</span>
) {
    fun applyTrainingButtonStyle(isTraining: Boolean) {
<span class="fc bfc" id="L20" title="All 2 branches covered.">        if (isTraining) {</span>
<span class="fc" id="L21">            binding.btnStartWorkout.apply {</span>
<span class="fc" id="L22">                text = &quot;Stop Training&quot;</span>
<span class="fc" id="L23">                icon = ContextCompat.getDrawable(context, R.drawable.ic_pause_square)</span>
<span class="fc" id="L24">                backgroundTintList = ContextCompat.getColorStateList(context, R.color.error_red)</span>
<span class="fc" id="L25">                setTextColor(Color.WHITE)</span>
<span class="fc" id="L26">                iconTint = ContextCompat.getColorStateList(context, android.R.color.white)</span>
<span class="fc" id="L27">                iconGravity = MaterialButton.ICON_GRAVITY_TEXT_START</span>
<span class="fc" id="L28">            }</span>
        } else {
<span class="fc" id="L30">            binding.btnStartWorkout.apply {</span>
<span class="fc" id="L31">                text = &quot;Begin Training&quot;</span>
<span class="fc" id="L32">                icon = ContextCompat.getDrawable(context, R.drawable.ic_begin_triangle)</span>
<span class="fc" id="L33">                backgroundTintList = ContextCompat.getColorStateList(context, R.color.success_green)</span>
<span class="fc" id="L34">                setTextColor(Color.WHITE)</span>
<span class="fc" id="L35">                iconTint = ContextCompat.getColorStateList(context, android.R.color.white)</span>
<span class="fc" id="L36">                iconGravity = MaterialButton.ICON_GRAVITY_TEXT_START</span>
<span class="fc" id="L37">            }</span>
        }
<span class="fc" id="L39">    }</span>

    fun applyExerciseUi(exerciseName: String) {
<span class="fc" id="L42">        val lowerCaseName = exerciseName.lowercase(Locale.getDefault())</span>

<span class="fc" id="L44">        binding.tvCurrentExerciseEmoji.text = ActivityUtils.getEmoji(lowerCaseName)</span>

<span class="pc bpc" id="L46" title="4 of 10 branches missed.">        when (lowerCaseName) {</span>
<span class="fc" id="L47">            &quot;plank&quot; -&gt; binding.labelReps.text = &quot;SECONDS&quot;</span>
<span class="fc" id="L48">            &quot;squat&quot;, &quot;lunge&quot; -&gt; binding.labelReps.text = &quot;REPS&quot;</span>
<span class="nc" id="L49">            else -&gt; binding.labelReps.text = &quot;REPS&quot;</span>
        }

<span class="fc bfc" id="L52" title="All 2 branches covered.">        binding.tvRepCount.text = if (lowerCaseName == &quot;plank&quot;) &quot;0.0&quot; else &quot;0&quot;</span>
<span class="fc" id="L53">        binding.tvXpPoints.text = &quot;+0&quot;</span>
<span class="fc" id="L54">    }</span>

    fun updateTrainingUiVisibility(visible: Boolean) {
<span class="fc bfc" id="L57" title="All 2 branches covered.">        val visibility = if (visible) View.VISIBLE else View.GONE</span>
<span class="fc" id="L58">        binding.hudTopContainer.visibility = visibility</span>
<span class="fc" id="L59">        binding.recordingIndicator.visibility = visibility</span>
<span class="fc" id="L60">        binding.formScoreContainer.visibility = visibility</span>
<span class="fc" id="L61">        binding.overlay.visibility = visibility</span>
<span class="fc" id="L62">    }</span>

    fun updateCountdownUi(showCountdown: Boolean) {
<span class="pc bpc" id="L65" title="1 of 2 branches missed.">        if (showCountdown) {</span>
<span class="fc" id="L66">            binding.hudTopContainer.visibility = View.GONE</span>
<span class="fc" id="L67">            binding.recordingIndicator.visibility = View.GONE</span>
<span class="fc" id="L68">            binding.formScoreContainer.visibility = View.GONE</span>
<span class="fc" id="L69">            binding.overlay.visibility = View.GONE</span>
<span class="fc" id="L70">            binding.tvFeedback.text = CoachConstants.COACH_MSG_READY</span>
        } else {
<span class="nc" id="L72">            updateTrainingUiVisibility(true)</span>
        }
<span class="fc" id="L74">    }</span>

    fun updateTargetUi(
        isScheduled: Boolean,
        exerciseName: String,
        repsTarget: Int?,
        durationTarget: Int?
    ) {
<span class="fc bfc" id="L82" title="All 2 branches covered.">        if (isScheduled) {</span>
<span class="fc" id="L83">            val exerciseLabel = ActivityUtils.getLabel(exerciseName)</span>
<span class="fc" id="L84">            val targetType = ActivityUtils.getTargetType(exerciseName)</span>

<span class="pc bpc" id="L86" title="3 of 5 branches missed.">            val targetText = when (targetType) {</span>
<span class="pc bpc" id="L87" title="1 of 2 branches missed.">                TargetType.REPS -&gt; if (repsTarget != null) {</span>
<span class="fc" id="L88">                    &quot;$exerciseLabel Target: $repsTarget Reps&quot;</span>
                } else {
<span class="nc" id="L90">                    &quot;$exerciseLabel Scheduled&quot;</span>
                }
<span class="nc bnc" id="L92" title="All 2 branches missed.">                TargetType.DURATION -&gt; if (durationTarget != null) {</span>
<span class="nc" id="L93">                    &quot;$exerciseLabel Target: $durationTarget Secs&quot;</span>
                } else {
<span class="nc" id="L95">                    &quot;$exerciseLabel Scheduled&quot;</span>
                }
<span class="nc" id="L97">                else -&gt; &quot;$exerciseLabel Scheduled&quot;</span>
            }
<span class="fc" id="L99">            binding.tvSystemSubtitle.text = targetText</span>
        } else {
<span class="fc" id="L101">            binding.tvSystemSubtitle.text = &quot;Start your session&quot;</span>
        }
<span class="fc" id="L103">    }</span>

    fun showRepPopup(repPopupText: TextView, count: Int) {
<span class="fc" id="L106">        repPopupText.text = count.toString()</span>
<span class="fc" id="L107">        repPopupText.visibility = View.VISIBLE</span>
<span class="fc" id="L108">        repPopupText.alpha = 1f</span>
<span class="fc" id="L109">        repPopupText.scaleX = 1f</span>
<span class="fc" id="L110">        repPopupText.scaleY = 1f</span>

<span class="fc" id="L112">        repPopupText.animate().cancel()</span>
<span class="fc" id="L113">        repPopupText.animate()</span>
<span class="fc" id="L114">            .scaleX(CoachConstants.REP_POPUP_SCALE)</span>
<span class="fc" id="L115">            .scaleY(CoachConstants.REP_POPUP_SCALE)</span>
<span class="fc" id="L116">            .alpha(0f)</span>
<span class="fc" id="L117">            .setDuration(CoachConstants.REP_POPUP_DURATION_MS)</span>
<span class="fc" id="L118">            .withEndAction {</span>
<span class="fc" id="L119">                repPopupText.visibility = View.GONE</span>
<span class="fc" id="L120">                repPopupText.alpha = 1f</span>
<span class="fc" id="L121">                repPopupText.scaleX = 1f</span>
<span class="fc" id="L122">                repPopupText.scaleY = 1f</span>
<span class="fc" id="L123">            }</span>
<span class="fc" id="L124">            .start()</span>
<span class="fc" id="L125">    }</span>

    fun showTrackingLockMessage(show: Boolean) {
<span class="fc bfc" id="L128" title="All 2 branches covered.">        if (show) {</span>
<span class="fc" id="L129">            binding.tvCountdown.text = CoachConstants.COACH_MSG_STEP_BACK</span>
<span class="fc" id="L130">            binding.tvCountdown.visibility = View.VISIBLE</span>
        } else {
<span class="fc" id="L132">            binding.tvCountdown.visibility = View.GONE</span>
        }
<span class="fc" id="L134">    }</span>

    fun updateCountdownText(seconds: Int) {
<span class="fc" id="L137">        binding.tvCountdown.text = seconds.toString()</span>
<span class="fc" id="L138">        binding.tvCountdown.visibility = View.VISIBLE</span>
<span class="fc" id="L139">    }</span>

    fun hideCountdown() {
<span class="fc" id="L142">        binding.tvCountdown.visibility = View.GONE</span>
<span class="fc" id="L143">    }</span>

    fun setFeedbackMessage(message: String) {
<span class="fc" id="L146">        binding.tvFeedback.text = message</span>
<span class="fc" id="L147">    }</span>

    fun clearOverlay() {
<span class="fc" id="L150">        binding.overlay.clear()</span>
<span class="fc" id="L151">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>